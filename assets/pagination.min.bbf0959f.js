import{g as h}from"./swiper-slide.fa1cb1eb.js";function V({swiper:t,extendParams:N,on:r,emit:o,params:i}){t.autoplay={running:!1,paused:!1,timeLeft:0},N({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let s,E,L=i&&i.autoplay?i.autoplay.delay:3e3,p=i&&i.autoplay?i.autoplay.delay:3e3,n,y=new Date().getTime,b,v,f,S,D,l;function O(e){!t||t.destroyed||!t.wrapperEl||e.target===t.wrapperEl&&(t.wrapperEl.removeEventListener("transitionend",O),d())}const A=()=>{if(t.destroyed||!t.autoplay.running)return;t.autoplay.paused?b=!0:b&&(p=n,b=!1);const e=t.autoplay.paused?n:y+p-new Date().getTime();t.autoplay.timeLeft=e,o("autoplayTimeLeft",e,e/L),E=requestAnimationFrame(()=>{A()})},_=()=>{let e;return t.virtual&&t.params.virtual.enabled?e=t.slides.filter(a=>a.classList.contains("swiper-slide-active"))[0]:e=t.slides[t.activeIndex],e?parseInt(e.getAttribute("data-swiper-autoplay"),10):void 0},g=e=>{if(t.destroyed||!t.autoplay.running)return;cancelAnimationFrame(E),A();let u=typeof e=="undefined"?t.params.autoplay.delay:e;L=t.params.autoplay.delay,p=t.params.autoplay.delay;const a=_();!Number.isNaN(a)&&a>0&&typeof e=="undefined"&&(u=a,L=a,p=a),n=u;const m=t.params.speed,C=()=>{!t||t.destroyed||(t.params.autoplay.reverseDirection?!t.isBeginning||t.params.loop||t.params.rewind?(t.slidePrev(m,!0,!0),o("autoplay")):t.params.autoplay.stopOnLastSlide||(t.slideTo(t.slides.length-1,m,!0,!0),o("autoplay")):!t.isEnd||t.params.loop||t.params.rewind?(t.slideNext(m,!0,!0),o("autoplay")):t.params.autoplay.stopOnLastSlide||(t.slideTo(0,m,!0,!0),o("autoplay")),t.params.cssMode&&(y=new Date().getTime(),requestAnimationFrame(()=>{g()})))};return u>0?(clearTimeout(s),s=setTimeout(()=>{C()},u)):requestAnimationFrame(()=>{C()}),u},I=()=>{t.autoplay.running=!0,g(),o("autoplayStart")},T=()=>{t.autoplay.running=!1,clearTimeout(s),cancelAnimationFrame(E),o("autoplayStop")},c=(e,u)=>{if(t.destroyed||!t.autoplay.running)return;clearTimeout(s),e||(l=!0);const a=()=>{o("autoplayPause"),t.params.autoplay.waitForTransition?t.wrapperEl.addEventListener("transitionend",O):d()};if(t.autoplay.paused=!0,u){D&&(n=t.params.autoplay.delay),D=!1,a();return}n=(n||t.params.autoplay.delay)-(new Date().getTime()-y),!(t.isEnd&&n<0&&!t.params.loop)&&(n<0&&(n=0),a())},d=()=>{t.isEnd&&n<0&&!t.params.loop||t.destroyed||!t.autoplay.running||(y=new Date().getTime(),l?(l=!1,g(n)):g(),t.autoplay.paused=!1,o("autoplayResume"))},M=()=>{if(t.destroyed||!t.autoplay.running)return;const e=h();e.visibilityState==="hidden"&&(l=!0,c(!0)),e.visibilityState==="visible"&&d()},F=e=>{e.pointerType==="mouse"&&(l=!0,c(!0))},P=e=>{e.pointerType==="mouse"&&t.autoplay.paused&&d()},q=()=>{t.params.autoplay.pauseOnMouseEnter&&(t.el.addEventListener("pointerenter",F),t.el.addEventListener("pointerleave",P))},x=()=>{t.el.removeEventListener("pointerenter",F),t.el.removeEventListener("pointerleave",P)},B=()=>{h().addEventListener("visibilitychange",M)},j=()=>{h().removeEventListener("visibilitychange",M)};r("init",()=>{t.params.autoplay.enabled&&(q(),B(),y=new Date().getTime(),I())}),r("destroy",()=>{x(),j(),t.autoplay.running&&T()}),r("beforeTransitionStart",(e,u,a)=>{t.destroyed||!t.autoplay.running||(a||!t.params.autoplay.disableOnInteraction?c(!0,!0):T())}),r("sliderFirstMove",()=>{if(!(t.destroyed||!t.autoplay.running)){if(t.params.autoplay.disableOnInteraction){T();return}v=!0,f=!1,l=!1,S=setTimeout(()=>{l=!0,f=!0,c(!0)},200)}}),r("touchEnd",()=>{if(!(t.destroyed||!t.autoplay.running||!v)){if(clearTimeout(S),clearTimeout(s),t.params.autoplay.disableOnInteraction){f=!1,v=!1;return}f&&t.params.cssMode&&d(),f=!1,v=!1}}),r("slideChange",()=>{t.destroyed||!t.autoplay.running||(D=!0)}),Object.assign(t.autoplay,{start:I,stop:T,pause:c,resume:d})}export{V as A};
