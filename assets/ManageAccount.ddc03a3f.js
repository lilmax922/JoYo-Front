import{_ as C,b8 as x,a8 as Q,r as U,$ as q,j as $,a0 as S,a1 as s,l as d,d as l,a9 as u,aq as m,Y as i,aa as _,bg as A,a3 as D,b9 as M,a4 as b,U as B,a6 as I,by as N,aR as T,bz as w,bD as z}from"./index.0001b1ed.js";import{Q as j,a as E}from"./QTable.081c05ca.js";import{Q as F}from"./QCardActions.cb19758d.js";import{Q as R}from"./QPage.6ecbc314.js";import"./QSelect.919916b8.js";import"./QChip.64ed6239.js";import"./format.3e32b8d9.js";import"./QCheckbox.d30c4ac8.js";import"./use-fullscreen.4797708d.js";const L={class:"container"},W={class:"row"},Y={class:"col-12"},G={class:"text-h4 text-center q-mb-md"},H={class:"row"},J={class:"input col-12"},K={class:"input col-12"},O={class:"input col-12"},X={class:"input col-12"},Z={class:"input col-12"},ee={__name:"ManageAccount",setup(ae){const c=x(),{getAllUsers:g,editUser:v,register:k,deleteUser:h}=c,{accounts:r}=Q(c);g();const p=U(""),e=q({_id:"",email:"",phone:"",nickname:"",password:"",confirmPassword:"",isPwd:!0,isConfirmPwd:!0,dialog:!1,loading:!1}),t={email(o){return w.isEmail(o)||"\u4FE1\u7BB1\u683C\u5F0F\u932F\u8AA4"},phone(o){return w.isMobilePhone(o,"zh-TW")||"\u624B\u6A5F\u865F\u78BC\u683C\u5F0F\u932F\u8AA4"},required(o){return o&&o.length>0||"\u6B04\u4F4D\u5FC5\u586B"},length(o){return o.length>=4&&o.length<=12||"\u9577\u5EA6\u5FC5\u9808\u70BA 4 ~ 12 \u500B\u5B57"},nickname(o){return o.length>=1&&o.length<=12||"\u9577\u5EA6\u5FC5\u9808\u70BA 1 ~ 12 \u500B\u5B57"},confirmPassword(o){return o===e.password||"\u5BC6\u78BC\u4E0D\u4E00\u81F4"}},V=[{name:"email",label:"\u4FE1\u7BB1",field:o=>o.email,align:"left",sortable:!0},{name:"phone",label:"\u96FB\u8A71",field:o=>o.phone,align:"left",sortable:!0},{name:"nickname",label:"\u66B1\u7A31",field:o=>o.nickname,align:"left",sortable:!0},{name:"edit",label:"\u7DE8\u8F2F/\u522A\u9664",field:o=>o.edit,align:"center"}],f=o=>{const a=r.value.findIndex(n=>n._id===o);o===-1?(e._id="",e.email="",e.phone="",e.nickname="",e.password="",e.confirmPassword="",e.loading=!1,e.index=-1):(e._id=r.value[a]._id,e.email=r.value[a].email,e.phone=r.value[a].phone,e.nickname=r.value[a].nickname,e.password=r.value[a].password,e.loading=!1,e.index=a),e.dialog=!0},P=async()=>{e._id===""?await k({email:e.email,phone:e.phone,nickname:e.nickname,password:e.password}):await v({_id:e._id,email:e.email,phone:e.phone,nickname:e.nickname,password:e.password}),e.dialog=!1};return(o,a)=>($(),S(R,{id:"manage_account",padding:""},{default:s(()=>[d("div",L,[d("div",W,[d("div",Y,[l(E,{class:"table",title:"Account Management",rows:_(r),columns:V,"row-key":o._id,filter:p.value,"rows-per-page-options":[10,15,0],"no-data-label":"\u76EE\u524D\u5C1A\u7121\u8CC7\u6599"},{"top-left":s(()=>[l(u,{class:"add_btn",label:"\u65B0\u589E\u5E33\u865F",onClick:a[0]||(a[0]=n=>f(-1))})]),"top-right":s(()=>[l(m,{debounce:"300",modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=n=>p.value=n),placeholder:"Search"},{append:s(()=>[l(i,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-edit":s(n=>[l(j,{class:"text-center q-gutter-sm"},{default:s(()=>[l(u,{icon:"mdi-pencil",color:"info","fab-mini":"",unelevated:"",size:"sm",onClick:y=>f(n.row._id)},null,8,["onClick"]),l(u,{icon:"delete",color:"secondary","fab-mini":"",unelevated:"",onClick:y=>_(h)(n.row._id)},null,8,["onClick"])]),_:2},1024)]),_:1},8,["rows","row-key","filter"])])]),l(T,{class:"dialog",modelValue:e.dialog,"onUpdate:modelValue":a[12]||(a[12]=n=>e.dialog=n),persistent:""},{default:s(()=>[l(A,{container:""},{default:s(()=>[l(D,{flat:""},{default:s(()=>[l(M,{onSubmit:P},{default:s(()=>[l(b,{class:"flex justify-end"},{default:s(()=>[B(l(u,{push:"",icon:"mdi-close"},null,512),[[z]])]),_:1}),d("div",G,I(e._id.length>0?"\u7DE8\u8F2F\u5E33\u865F":"\u65B0\u589E\u5E33\u865F"),1),l(b,null,{default:s(()=>[d("div",H,[d("div",J,[l(m,{rounded:"",standout:"","bottom-slots":"",modelValue:e.email,"onUpdate:modelValue":a[3]||(a[3]=n=>e.email=n),label:"E-mail",rules:[t.required,t.email]},{prepend:s(()=>[l(i,{name:"mdi-email"})]),append:s(()=>[l(i,{name:"close",onClick:a[2]||(a[2]=n=>e.email=""),class:"cursor-pointer"})]),_:1},8,["modelValue","rules"])]),d("div",K,[l(m,{rounded:"",standout:"","bottom-slots":"",modelValue:e.phone,"onUpdate:modelValue":a[5]||(a[5]=n=>e.phone=n),label:"Phone",rules:[t.required,t.phone]},N({prepend:s(()=>[l(i,{name:"mdi-cellphone"})]),_:2},[e.phone?{name:"append",fn:s(()=>[l(i,{name:"close",onClick:a[4]||(a[4]=n=>e.phone=""),class:"cursor-pointer"})]),key:"0"}:void 0]),1032,["modelValue","rules"])]),d("div",O,[l(m,{rounded:"",standout:"","bottom-slots":"",modelValue:e.nickname,"onUpdate:modelValue":a[7]||(a[7]=n=>e.nickname=n),label:"NickName",rules:[t.required,t.nickname]},{prepend:s(()=>[l(i,{name:"mdi-draw"})]),append:s(()=>[l(i,{name:"close",onClick:a[6]||(a[6]=n=>e.nickname=""),class:"cursor-pointer"})]),_:1},8,["modelValue","rules"])]),d("div",X,[l(m,{rounded:"",standout:"","bottom-slots":"",modelValue:e.password,"onUpdate:modelValue":a[9]||(a[9]=n=>e.password=n),label:"Password",rules:[t.required,t.length],type:e.isPwd?"password":"text"},{prepend:s(()=>[l(i,{name:"mdi-lock"})]),append:s(()=>[l(i,{class:"cursor-pointer",name:e.isPwd?"visibility_off":"visibility",onClick:a[8]||(a[8]=n=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","rules","type"])]),d("div",Z,[l(m,{rounded:"",standout:"","bottom-slots":"",modelValue:e.confirmPassword,"onUpdate:modelValue":a[11]||(a[11]=n=>e.confirmPassword=n),label:"Confirm Password",rules:[t.required,t.length,t.confirmPassword],type:e.isConfirmPwd?"password":"text"},{prepend:s(()=>[l(i,{name:"mdi-check-all"})]),append:s(()=>[l(i,{class:"cursor-pointer",name:e.isConfirmPwd?"visibility_off":"visibility",onClick:a[10]||(a[10]=n=>e.isConfirmPwd=!e.isConfirmPwd)},null,8,["name"])]),_:1},8,["modelValue","rules","type"])])])]),_:1}),l(F,{class:"flex flex-center"},{default:s(()=>[l(u,{class:"submit_btn q-mb-sm",type:"submit",label:e._id.length>0?"\u7DE8\u8F2F":"\u65B0\u589E"},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}))}};var ue=C(ee,[["__scopeId","data-v-4bf021df"]]);export{ue as default};
